




<!DOCTYPE html>
<!--[if IE 7]> <html lang="en" class="lt-ie9 lt-ie8 no-js"> <![endif]-->
<!--[if IE 8]> <html lang="en" class="lt-ie9 no-js"> <![endif]-->
<!--[if gt IE 8]><!--> <html lang="en" class="no-js"> <!--<![endif]-->
<head>
    <meta charset=utf-8 />
    <meta name="author" content="UCL" />
    <meta name="description" content="UCL Homepage" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- social meta -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@uclnews">
    <meta name="twitter:title" content="UCL - London's Global University">
    <meta name="twitter:description" content="UCL (University College London) is London's leading multidisciplinary university, with 8,000 staff and 25,000 students.">
    <meta name="twitter:creator" content="@UCLWAMS">
    <meta name="twitter:image:src" content="http://www.ucl.ac.uk/visual-identity/logos/standalone.png">
    <meta property="og:image" content="http://www.ucl.ac.uk/visual-identity/logos/standalone.png" />
    <meta property="og:title" content="UCL - London's Global University" />
    <meta property="og:url" content="http://www.ucl.ac.uk" />
    <meta property="og:site_name" content="UCL" />
    <meta property="og:description" content="UCL (University College London) is London's leading multidisciplinary university, with 8,000 staff and 25,000 students." />
    <meta property="og:type" content="website" />
    <meta property="og:profile_id" content="uclofficial" />
    <!-- end social meta -->

  <title>Testing Software</title>

  <link href="/research-computing-with-cpp/assets/css/screen.min.css" media="screen, projection" rel="stylesheet" type="text/css" />
  <link href="/research-computing-with-cpp/assets/css/jekyll-styles.css" rel="stylesheet" type="text/css">
  <link href="/research-computing-with-cpp/site-styles/local_styles.css" rel="stylesheet" type="text/css">
  <link href="/research-computing-with-cpp/site-styles/ipython.css" rel="stylesheet" type="text/css">

  <link rel="shortcut icon" href="/research-computing-with-cpp/assets/images/favicon.ico" />
    <link rel="apple-touch-icon-precomposed" href="/research-computing-with-cpp/favicon-152.png">
    <meta name="msapplication-TileColor" content="#000000">
    <meta name="msapplication-TileImage" content="/research-computing-with-cpp/favicon-144.png">

  <script src="/research-computing-with-cpp/assets/js/lib/modernizr-custom.js"></script>
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

    <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ['$','$'], ["\\(","\\)"] ],
            displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
            processEscapes: true,
            processEnvironments: true
        },
        // Center justify equations in code and markdown cells. Elsewhere
        // we use CSS to left justify single line equations in code cells.
        displayAlign: 'center',
        "HTML-CSS": {
            styles: {'.MathJax_Display': {"margin": 0}},
            linebreaks: { automatic: true }
        }
    });
    </script>

    <script>
      var cuttingTheMustard = document.querySelector && window.localStorage && window.addEventListener;

      Modernizr.load({
        //cutting the mustard as used by the BBC
        test: cuttingTheMustard
        //if old browser load the shiv
        ,
        nope: [
          '/research-computing-with-cpp/assets/js/lib/html5shiv-printshiv.min.js', '/research-computing-with-cpp/assets/js/lib/respond.min.js'
        ]
      });
      //set conditional assets for main.js
      var globalSiteSpecificVars = {
        pathToJquery: "/research-computing-with-cpp/assets/js/lib/jquery-1.9.1.min",
        googleAnalyticsIdsArray: [] //specify array of site specific id's NOT UCL generic UA-943297-1
      }
      if (cuttingTheMustard) {
        globalSiteSpecificVars.pathToJquery = '/research-computing-with-cpp/assets/js/lib/jquery-2.1.1.min';
      }
    </script>
    <script src="/research-computing-with-cpp/assets/js/lib/require.min.js"></script>
    <script src="/research-computing-with-cpp/assets/js/main.js"></script>
    <script>
      require.config({
        baseUrl: '/research-computing-with-cpp/assets/js/lib'
      });
        require(["app/general", "app/searchWithAutoComplete", "app/tabs"]);//load the default stuff
    </script>
</head>

<body id="index" class="layout-vertical layout-vertical--nav-1col">

  <header class="header header--desktop">

  <a class="header__close" href="#">
    <img src="/research-computing-with-cpp/assets/images/close.png" class="lazy" data-src="//static.ucl.ac.uk/indigo/images/close.png" alt="X" />Close</a>

  <div class="masthead">

  <div class="wrapper clearfix">

      <div class="masthead__search">
					<form action="#" method="get">
						<div class="search-form">
							<input type="search" placeholder="Search UCL websites, degrees, short courses, people and more" aria-label="Search UCL websites, degrees, short courses" class="search-form__input search-form__input--search tt-input" name="query" value="" autocomplete="off" spellcheck="false" dir="auto" style="position: relative; vertical-align: top;">
						</div>
						<input type="submit" name="submit" value="Go" class="btn btn--primary search-form__input search-form__input--submit">

					</form>
				</div>


				<nav class="masthead__nav m-clear">
					<ul class="masthead__list">
						<li class="masthead__item"><a href="//www.ucl.ac.uk/prospective-students" title="" class="masthead__link">Study</a>
						</li>
						<li class="masthead__item"><a href="//www.ucl.ac.uk/research" title="" class="masthead__link">Research</a>
						</li>
						<li class="masthead__item"><a href="//www.ucl.ac.uk/engage" title="" class="masthead__link">Engage</a>
						</li>

						<li class="masthead__item"><a href="//www.ucl.ac.uk/about" title="" class="masthead__link">About</a>
						</li>

						<li class="masthead__item"><a href="//www.ucl.ac.uk/giving" title="" class="masthead__link give-link">Give</a>
						</li>
					</ul>
				</nav>
			</div>

</div><!-- end .masthead -->


  <div class="wrapper">

    <div class="photograph">
  <div class="brand">
    <p class="brand__heading">COMP0210: Research Computing with C++</p>
    <a href="/" class="brand__link"><span class="visually-hidden">Home</span></a>
    <img src="//cdn.ucl.ac.uk/img/blank.gif" data-src="//static.ucl.ac.uk/indigo/images/ucl-logo.svg" alt="UCL logo" id="logo" class="brand__logo lazy">  
  </div>
</div>


    <div class="sidebar">

      <nav class="nav nav--mobile">
        <ul>
          

 <li class="active"> <a href="/research-computing-with-cpp/01projects/">Introduction to C++</a><ul><li class="inactive"> <a href="/research-computing-with-cpp/01projects/sec01Git.html">Version control with Git</a> </li> <li class="inactive"> <a href="/research-computing-with-cpp/01projects/sec02IntroToCpp.html">Introduction to C++</a> </li> </ul> </li><li class="active"> <a href="/research-computing-with-cpp/02cpp1/">Week 2: Custom Data Types and (a glimpse of) the Standard Library</a><ul><li class="inactive"> <a href="/research-computing-with-cpp/02cpp1/sec01Types.html">Types</a> </li> <li class="inactive"> <a href="/research-computing-with-cpp/02cpp1/sec02PassByValueOrReference.html">Pass by Value and Pass by Reference</a> </li> <li class="inactive"> <a href="/research-computing-with-cpp/02cpp1/sec03ObjectOrientedProgramming.html">Object Oriented Programming</a> </li> <li class="inactive"> <a href="/research-computing-with-cpp/02cpp1/sec04StandardLibrary.html">C++ Standard Library</a> </li> <li class="inactive"> <a href="/research-computing-with-cpp/02cpp1/sec05Pointers.html">Pointers in C++</a> </li> </ul> </li><li class="active"> <a href="/research-computing-with-cpp/03cpp2/">Week 3: Error Handling and C++ Projects</a><ul><li class="active"> <a href="/research-computing-with-cpp/03cpp2/sec01Exceptions.html">Exceptions</a> </li> <li class="active"> <a href="/research-computing-with-cpp/03cpp2/sec02ErrorHandling.html">Other Error Mechanisms</a> </li> <li class="active"> <a href="/research-computing-with-cpp/03cpp2/sec03CMakeBasics.html">CMake Basics</a> </li> <li class="active"> <a href="/research-computing-with-cpp/03cpp2/sec04UnitTesting.html">Testing Software</a> </li> <li class="active"> <a href="/research-computing-with-cpp/03cpp2/sec05SoftwareBuilds.html">Building research software</a> </li> <li class="active"> <a href="/research-computing-with-cpp/03cpp2/sec06CMakeBackground.html">CMake Background</a> </li> <li class="active"> <a href="/research-computing-with-cpp/03cpp2/sec07CMakeHelloWorld.html">HelloWorld with CMake</a> </li> <li class="active"> <a href="/research-computing-with-cpp/03cpp2/sec08BuildHelloWorld.html">Building 'HelloWorld'</a> </li> </ul> </li><li class="active"> <a href="/research-computing-with-cpp/04cpp3/">Week 4: Polymorphism</a><ul><li class="inactive"> <a href="/research-computing-with-cpp/04cpp3/sec01Inheritance.html">Inheritance</a> </li> <li class="inactive"> <a href="/research-computing-with-cpp/04cpp3/sec03Templates.html">Templates</a> </li> </ul> </li> <li class="active"> <a href="/research-computing-with-cpp/05libraries/">Week 5: Code Design and Programming Paradigms</a><ul> <li class="inactive"> <a href="/research-computing-with-cpp/05libraries/ProgrammingParadigms.html">Programming Paradigms</a> </li> <li class="inactive"> <a href="/research-computing-with-cpp/05libraries/sec01DesigningClasses.html">Designing Classes and Code</a> </li> <li class="inactive"> <a href="/research-computing-with-cpp/05libraries/sec03CppCodeDesign.html">C++ Code Design Summary</a> </li> </ul> </li><li class="active"> <a href="/research-computing-with-cpp/06tooling/">Week 6: Libraries and Tooling</a><ul> <li class="inactive"> <a href="/research-computing-with-cpp/06tooling/sec00TimingAndTooling.html">Timing and Tooling</a> </li> <li class="inactive"> <a href="/research-computing-with-cpp/06tooling/sec01ChoosingLibraries.html">Choosing Libraries</a> </li> <li class="inactive"> <a href="/research-computing-with-cpp/06tooling/sec02LibraryBasics.html">Library Basics</a> </li> <li class="inactive"> <a href="/research-computing-with-cpp/06tooling/sec03LinkingLibraries.html">Linking Libraries</a> </li> <li class="inactive"> <a href="/research-computing-with-cpp/06tooling/sec04InstallingLibraries.html">Installing Libraries</a> </li> <li class="inactive"> <a href="/research-computing-with-cpp/06tooling/sec05Summary.html">Summary</a> </li></ul> </li> <li class="active"> <a href="/research-computing-with-cpp/07performance/">Week 7: Introduction to Performance</a><ul> <li class="inactive"> <a href="/research-computing-with-cpp/07performance/sec00Motivation.html">Why Optimise for Performance?</a> </li> <li class="inactive"> <a href="/research-computing-with-cpp/07performance/sec01Complexity.html">Computational Complexity</a> </li> <li class="inactive"> <a href="/research-computing-with-cpp/07performance/sec02Memory.html">Memory</a> </li> <li class="inactive"> <a href="/research-computing-with-cpp/07performance/sec03Optimisation.html">Compiler Optimisation</a> </li> </ul> </li><li class="active"> <a href="/research-computing-with-cpp/08openmp/">Week 8: Parallel Programming with OpenMP</a><ul><li class="inactive"> <a href="/research-computing-with-cpp/08openmp/01_parallel_programming.html">What is parallel programming?</a> </li> <li class="inactive"> <a href="/research-computing-with-cpp/08openmp/02_intro_openmp.html">An introduction to OpenMP</a> </li> <li class="inactive"> <a href="/research-computing-with-cpp/08openmp/04_cache_performance.html">Cache Performance in Shared Memory</a> </li> <li class="inactive"> <a href="/research-computing-with-cpp/08openmp/05_summary.html">Summary</a> </li></ul> </li> <li class="active"> <a href="/research-computing-with-cpp/09distributed_computing/">Week 9: Distributed Memory Parallelism</a><ul><li class="inactive"> <a href="/research-computing-with-cpp/09distributed_computing/sec01DistributedMemoryModels.html">Distributed Memory Model</a> </li> <li class="inactive"> <a href="/research-computing-with-cpp/09distributed_computing/sec02ProgrammingWithMPI.html">MPI Programming</a> </li> </ul> </li> <li class="active"> <a href="/research-computing-with-cpp/10parallel_algorithms/">Week 10: Work Depth Models and Parallel Strategies</a><ul> <li class="inactive"> <a href="/research-computing-with-cpp/10parallel_algorithms/AsynchronousMPI.html">Asynchronous MPI Programs</a> </li> <li class="inactive"> <a href="/research-computing-with-cpp/10parallel_algorithms/WorkDepth.html">Work Depth Models and Parallel Strategy</a> </li></ul> </li> 

        </ul>
      </nav>

      <nav class="nav nav--left">
        <ul>
          

 <li class="active"> <a href="/research-computing-with-cpp/01projects/">Introduction to C++</a><ul><li class="inactive"> <a href="/research-computing-with-cpp/01projects/sec01Git.html">Version control with Git</a> </li> <li class="inactive"> <a href="/research-computing-with-cpp/01projects/sec02IntroToCpp.html">Introduction to C++</a> </li> </ul> </li><li class="active"> <a href="/research-computing-with-cpp/02cpp1/">Week 2: Custom Data Types and (a glimpse of) the Standard Library</a><ul><li class="inactive"> <a href="/research-computing-with-cpp/02cpp1/sec01Types.html">Types</a> </li> <li class="inactive"> <a href="/research-computing-with-cpp/02cpp1/sec02PassByValueOrReference.html">Pass by Value and Pass by Reference</a> </li> <li class="inactive"> <a href="/research-computing-with-cpp/02cpp1/sec03ObjectOrientedProgramming.html">Object Oriented Programming</a> </li> <li class="inactive"> <a href="/research-computing-with-cpp/02cpp1/sec04StandardLibrary.html">C++ Standard Library</a> </li> <li class="inactive"> <a href="/research-computing-with-cpp/02cpp1/sec05Pointers.html">Pointers in C++</a> </li> </ul> </li><li class="active"> <a href="/research-computing-with-cpp/03cpp2/">Week 3: Error Handling and C++ Projects</a><ul><li class="active"> <a href="/research-computing-with-cpp/03cpp2/sec01Exceptions.html">Exceptions</a> </li> <li class="active"> <a href="/research-computing-with-cpp/03cpp2/sec02ErrorHandling.html">Other Error Mechanisms</a> </li> <li class="active"> <a href="/research-computing-with-cpp/03cpp2/sec03CMakeBasics.html">CMake Basics</a> </li> <li class="active"> <a href="/research-computing-with-cpp/03cpp2/sec04UnitTesting.html">Testing Software</a> </li> <li class="active"> <a href="/research-computing-with-cpp/03cpp2/sec05SoftwareBuilds.html">Building research software</a> </li> <li class="active"> <a href="/research-computing-with-cpp/03cpp2/sec06CMakeBackground.html">CMake Background</a> </li> <li class="active"> <a href="/research-computing-with-cpp/03cpp2/sec07CMakeHelloWorld.html">HelloWorld with CMake</a> </li> <li class="active"> <a href="/research-computing-with-cpp/03cpp2/sec08BuildHelloWorld.html">Building 'HelloWorld'</a> </li> </ul> </li><li class="active"> <a href="/research-computing-with-cpp/04cpp3/">Week 4: Polymorphism</a><ul><li class="inactive"> <a href="/research-computing-with-cpp/04cpp3/sec01Inheritance.html">Inheritance</a> </li> <li class="inactive"> <a href="/research-computing-with-cpp/04cpp3/sec03Templates.html">Templates</a> </li> </ul> </li> <li class="active"> <a href="/research-computing-with-cpp/05libraries/">Week 5: Code Design and Programming Paradigms</a><ul> <li class="inactive"> <a href="/research-computing-with-cpp/05libraries/ProgrammingParadigms.html">Programming Paradigms</a> </li> <li class="inactive"> <a href="/research-computing-with-cpp/05libraries/sec01DesigningClasses.html">Designing Classes and Code</a> </li> <li class="inactive"> <a href="/research-computing-with-cpp/05libraries/sec03CppCodeDesign.html">C++ Code Design Summary</a> </li> </ul> </li><li class="active"> <a href="/research-computing-with-cpp/06tooling/">Week 6: Libraries and Tooling</a><ul> <li class="inactive"> <a href="/research-computing-with-cpp/06tooling/sec00TimingAndTooling.html">Timing and Tooling</a> </li> <li class="inactive"> <a href="/research-computing-with-cpp/06tooling/sec01ChoosingLibraries.html">Choosing Libraries</a> </li> <li class="inactive"> <a href="/research-computing-with-cpp/06tooling/sec02LibraryBasics.html">Library Basics</a> </li> <li class="inactive"> <a href="/research-computing-with-cpp/06tooling/sec03LinkingLibraries.html">Linking Libraries</a> </li> <li class="inactive"> <a href="/research-computing-with-cpp/06tooling/sec04InstallingLibraries.html">Installing Libraries</a> </li> <li class="inactive"> <a href="/research-computing-with-cpp/06tooling/sec05Summary.html">Summary</a> </li></ul> </li> <li class="active"> <a href="/research-computing-with-cpp/07performance/">Week 7: Introduction to Performance</a><ul> <li class="inactive"> <a href="/research-computing-with-cpp/07performance/sec00Motivation.html">Why Optimise for Performance?</a> </li> <li class="inactive"> <a href="/research-computing-with-cpp/07performance/sec01Complexity.html">Computational Complexity</a> </li> <li class="inactive"> <a href="/research-computing-with-cpp/07performance/sec02Memory.html">Memory</a> </li> <li class="inactive"> <a href="/research-computing-with-cpp/07performance/sec03Optimisation.html">Compiler Optimisation</a> </li> </ul> </li><li class="active"> <a href="/research-computing-with-cpp/08openmp/">Week 8: Parallel Programming with OpenMP</a><ul><li class="inactive"> <a href="/research-computing-with-cpp/08openmp/01_parallel_programming.html">What is parallel programming?</a> </li> <li class="inactive"> <a href="/research-computing-with-cpp/08openmp/02_intro_openmp.html">An introduction to OpenMP</a> </li> <li class="inactive"> <a href="/research-computing-with-cpp/08openmp/04_cache_performance.html">Cache Performance in Shared Memory</a> </li> <li class="inactive"> <a href="/research-computing-with-cpp/08openmp/05_summary.html">Summary</a> </li></ul> </li> <li class="active"> <a href="/research-computing-with-cpp/09distributed_computing/">Week 9: Distributed Memory Parallelism</a><ul><li class="inactive"> <a href="/research-computing-with-cpp/09distributed_computing/sec01DistributedMemoryModels.html">Distributed Memory Model</a> </li> <li class="inactive"> <a href="/research-computing-with-cpp/09distributed_computing/sec02ProgrammingWithMPI.html">MPI Programming</a> </li> </ul> </li> <li class="active"> <a href="/research-computing-with-cpp/10parallel_algorithms/">Week 10: Work Depth Models and Parallel Strategies</a><ul> <li class="inactive"> <a href="/research-computing-with-cpp/10parallel_algorithms/AsynchronousMPI.html">Asynchronous MPI Programs</a> </li> <li class="inactive"> <a href="/research-computing-with-cpp/10parallel_algorithms/WorkDepth.html">Work Depth Models and Parallel Strategy</a> </li></ul> </li> 

        </ul>
      </nav>

    </div>
    <!-- end .sidebar -->

    <nav class="nav nav--top">
      <ul>
        
      </ul>
    </nav>

  </div>
  <!-- end .wrapper -->

  </header>
  <!-- end .header -->

  <div class="site-content wrapper">

    <header class="header header--mobile default-header">
      <a class="header__open" href="#">
        <img src="/research-computing-with-cpp/assets/images/ucl-menu.svg" alt="Menu" />
      </a>
    </header>

    <div class="site-content__inner clearfix">
      <div class="site-content__body">

          
            <nav class="breadcrumb clearfix">
              <ul class="breadcrumb__list">
                <li class="breadcrumb__item"><a href="http://www.ucl.ac.uk/">UCL</a></li>

  
    <li class="breadcrumb__item"><a href="http://www.ucl.ac.uk/ISD">ISD</a></li>
  
    <li class="breadcrumb__item"><a href="http://www.ucl.ac.uk/isd/services">Our services</a></li>
  
    <li class="breadcrumb__item"><a href="http://www.ucl.ac.uk/isd/services/research-it">Research IT</a></li>
  
    <li class="breadcrumb__item"><a href="http://www.ucl.ac.uk/isd/services/research-it/training">Training</a></li>
  

<li class="breadcrumb__item"><a href="/research-computing-with-cpp/">COMP0210</a></li>



              </ul>
            </nav>
           <div class="site-content__main">
            
            
          
          

    <h1 id="testing-software">Testing Software</h1>

<p>Testing is a crucial part of of software projects, and is especially critical in projects like scientific software where it is necessary to be confident about the accuracy and correctness of our results.</p>

<p>Testing is usually a layered process, with:</p>
<ul>
  <li><strong>unit tests</strong> focussing on checking small, independent pieces of code, and</li>
  <li><strong>integration tests</strong> checking larger processes that involve multiple pieces of unit tested code working together, and</li>
  <li><strong>system tests</strong> checking that the complete system works.</li>
</ul>

<h2 id="testing-frameworks">Testing Frameworks</h2>

<p>Testing frameworks exist for all major languages, and you may have come across some of them before. In this course we will be using the <a href="https://github.com/catchorg/Catch2">Catch2</a> library for writing tests. If, in the future, you decide (or need) to use a different framework such a <a href="https://github.com/google/googletest">Google Tests</a>, then the process will be the same but with some changes in syntax. The same approach can also be taken to other languages like Python using frameworks like <a href="https://docs.pytest.org/en/7.4.x/">pytest</a>, which some of you may have used before.</p>

<h2 id="installing-catch2">Installing Catch2</h2>

<p><strong>Before this week’s class you need to install the Catch2 testing library.</strong></p>

<p>You can clone the <a href="https://github.com/catchorg/Catch2">Catch2 repository here</a>. To install you should complete the following steps:</p>

<ol>
  <li>Clone the repository.</li>
  <li>Move into the Catch2 folder in your terminal.</li>
  <li><code class="language-plaintext highlighter-rouge">cmake -B build -DBUILD_TESTING=OFF</code></li>
  <li><code class="language-plaintext highlighter-rouge">cmake --build build</code></li>
  <li>If you have permissions and want to install system wide you can run <code class="language-plaintext highlighter-rouge">cmake --install build/</code>. Otherwise run <code class="language-plaintext highlighter-rouge">cmake --install build/ --prefix install_path</code> where you replace <code class="language-plaintext highlighter-rouge">install_path</code> a path to a folder of your choice.</li>
</ol>

<p>To make Catch2 available in CMake, in your top level CMakeLists.txt include the following line:</p>

<p><code class="language-plaintext highlighter-rouge">find_package(Catch2 3 REQUIRED)</code></p>

<p>or if you have not installed system wide, use the following line:</p>

<p><code class="language-plaintext highlighter-rouge">find_package(Catch2 3 REQUIRED PATHS install_path)</code></p>

<p>replacing <code class="language-plaintext highlighter-rouge">install_path</code> with the path to your chosen install folder. This allows cmake to find your Catch2 installation, including the header files and the compiled library.</p>

<p>When you create your executable for your test files, you’ll need to link with the Catch2 library (along with any other libraries you need):</p>
<div class="language-cmake highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">add_executable</span><span class="p">(</span>test_executable<span class="p">)</span>
<span class="nb">target_sources</span><span class="p">(</span>test_executable PRIVATE test_source.cpp<span class="p">)</span>
<span class="nb">target_link_libraries</span><span class="p">(</span>test_executable PUBLIC Catch2::Catch2WithMain<span class="p">)</span>
</code></pre></div></div>

<p>You can find more information about using Catch2 in the documentation on their <a href="https://github.com/catchorg/Catch2">github page</a>.</p>

<h2 id="unit-testing-principles">Unit Testing Principles</h2>

<p>Unit tests check the correctness of the smallest pieces of code, for example an individual function or class with no further dependencies. Such a function may have multiple <em>test cases</em>, which check for different aspects of the behaviour, or which check the behaviour under different circumstances/inputs.</p>

<p>When writing unit tests for a function you will want to consider:</p>
<ul>
  <li>What are some where you <em>know</em> the expected output? It is important not to write circular tests which end up comparing the result of the code to itself!</li>
  <li>You should always test the output on multiple inputs.
    <ul>
      <li>Make sure that you don’t only check trivial cases. Often special cases can be easier to calculate the expected values for, but don’t require all the code to be correct to get the answer you expect. For example settings values in your input vector to 0, or passing an empty vector, might get you the right result even if your code processing that vector is wrong. Ask yourself if the outputs that you’re checking are dependent on all the different parts of the code you are testing being correct. If not, then add more test cases that do depend on those bits of code!</li>
    </ul>
  </li>
  <li>Break your set of possible inputs into different cases, and pay particular attention to edge cases.
    <ul>
      <li>You may want to check for example how your function behaves for positive numbers, negative numbers, and 0. For some functions you may want to check how it handles very large or small inputs (if there is a risk of overflow/underflow).</li>
      <li>Edge cases are the most common places for errors to appear. Consider a function that takes a vector of data and updates it so that each value is replaced by the average of two values on either side of it. What should happen to the values at either end of the vector? Does this happen correctly?</li>
    </ul>
  </li>
  <li>Checking for failure is as important as checking for success! Many functions that we write are not valid for all inputs, and we should check that they behave properly when given invalid inputs.
    <ul>
      <li>Check that functions which should throw exceptions under certain circumstances do indeed throw those exceptions.</li>
      <li>Common failure cases for various kinds of functions include providing negative or 0-value inputs, indices which are out of bounds, or empty vectors/strings.</li>
      <li>If you have designed a class to have certain properties, check that you cannot construct an invalid class, and that its properties are maintained correctly.</li>
    </ul>
  </li>
  <li>Ask yourself if another function, which does something different to what you intended, could pass your tests. If so, consider making your tests more robust!</li>
</ul>

<p>Writing comprehensive tests takes some practice, and is highly dependent on the kind of code that you have written. <strong>Always look at your code critically, consider how it behaves in different circumstances.</strong></p>

<h2 id="integration-and-system-tests">Integration and System Tests</h2>

<p>Once you have thoroughly tested the smallest units of your code, you should also write tests which test more complex components. These may be functions which call multiple sub-functions for example. You should increase the size of the components you are testing piece by piece until you reach full system tests. System tests check the behaviour from input to output, and often include mocking up things like user input.</p>

<h2 id="testing-syntax">Testing Syntax</h2>

<p>Most of the important syntax that you will need to know about are contained within two header files:</p>
<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include</span> <span class="cpf">&lt;catch2/catch_test_macros.hpp&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;catch2/matchers/catch_matchers_floating_point.hpp&gt;</span><span class="cp">
</span></code></pre></div></div>
<ul>
  <li><code class="language-plaintext highlighter-rouge">catch_test_macros.hpp</code> contains the macros that we need in order to declare test cases and do standard checks.</li>
  <li><code class="language-plaintext highlighter-rouge">catch_matchers_floating_point.hpp</code> contains some extra functionality for testing floating point values. This is different from testing other values because <strong>floating point arithmetic is almost never completely accurate, so instead we have to test whether results are within some relative or absolute tolerance.</strong>
    <ul>
      <li>There is additional special functionality for other things like strings, containers (such as vector) and more. <code class="language-plaintext highlighter-rouge">&lt;catch2/matchers/catch_matchers_all.hpp&gt;</code> can be useful if you want to have access to all of these.</li>
      <li>I recommend writing the line <code class="language-plaintext highlighter-rouge">using namespace Catch::Matchers</code> if you are using any of this functionality to avoid namespace clutter in your test files. (Otherwise you need to write things like <code class="language-plaintext highlighter-rouge">Catch::Matchers::WithinRel</code> every time you check a float which gets very cumbersome and makes things more difficult to read.)</li>
    </ul>
  </li>
</ul>

<p>Here’s an example using our <code class="language-plaintext highlighter-rouge">vector_functions</code> code from last week’s class, with some additional example tests to check floating point and vector examples.</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include</span> <span class="cpf">&lt;catch2/catch_test_macros.hpp&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;catch2/matchers/catch_matchers_all.hpp&gt;</span><span class="cp">
#include</span> <span class="cpf">"vector_functions.h"</span><span class="cp">
#include</span> <span class="cpf">&lt;functional&gt;</span><span class="cp">
</span>
<span class="k">using</span> <span class="k">namespace</span> <span class="n">Catch</span><span class="o">::</span><span class="n">Matchers</span><span class="p">;</span>

<span class="n">TEST_CASE</span><span class="p">(</span> <span class="s">"Counting with loop is correct"</span><span class="p">,</span> <span class="s">"[ex1]"</span> <span class="p">)</span> <span class="p">{</span>
    <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">example</span> <span class="o">=</span> <span class="p">{</span><span class="mi">5</span><span class="p">};</span>
    <span class="n">REQUIRE</span><span class="p">(</span> <span class="n">countMultiplesOfFive</span><span class="p">(</span><span class="n">example</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">);</span>
<span class="p">}</span>

<span class="n">TEST_CASE</span><span class="p">(</span> <span class="s">"Adding elements to a vector"</span><span class="p">,</span> <span class="s">"[ex2]"</span> <span class="p">)</span>
<span class="p">{</span>
    <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">starting_vector</span><span class="p">;</span>
    <span class="n">addElements</span><span class="p">(</span><span class="n">starting_vector</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">);</span>
    <span class="n">REQUIRE</span><span class="p">(</span> <span class="n">starting_vector</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">==</span> <span class="mi">4</span><span class="p">);</span>
    <span class="k">for</span><span class="p">(</span><span class="k">auto</span> <span class="o">&amp;&amp;</span><span class="n">i</span> <span class="o">:</span> <span class="n">starting_vector</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">REQUIRE</span><span class="p">(</span><span class="n">i</span> <span class="o">==</span> <span class="mi">5</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="n">TEST_CASE</span><span class="p">(</span><span class="s">"Testing floats"</span><span class="p">,</span> <span class="s">"[matchers]"</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kt">double</span> <span class="n">x</span> <span class="o">=</span> <span class="mf">1.0</span><span class="o">/</span><span class="mf">2.0</span><span class="p">;</span>
    <span class="n">REQUIRE_THAT</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">WithinRel</span><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.0001</span><span class="p">));</span>
<span class="p">}</span>

<span class="n">TEST_CASE</span><span class="p">(</span><span class="s">"Testing vectors"</span><span class="p">,</span> <span class="s">"[matchers]"</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">v</span><span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">};</span>
    <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">bool</span><span class="o">&gt;</span> <span class="n">v_check</span><span class="p">(</span><span class="n">v</span><span class="p">.</span><span class="n">size</span><span class="p">());</span>
    <span class="n">std</span><span class="o">::</span><span class="n">transform</span><span class="p">(</span><span class="n">v</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span> <span class="n">v</span><span class="p">.</span><span class="n">end</span><span class="p">(),</span> <span class="n">v_check</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span> <span class="p">[](</span><span class="kt">int</span> <span class="n">z</span><span class="p">){</span><span class="k">return</span> <span class="n">z</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">;});</span>
    <span class="n">REQUIRE_THAT</span><span class="p">(</span><span class="n">v_check</span><span class="p">,</span> <span class="n">AllTrue</span><span class="p">());</span>
<span class="p">}</span>
</code></pre></div></div>
<ul>
  <li><code class="language-plaintext highlighter-rouge">TEST_CASE</code> declares a new test case within this test file. Each test case has a description and optional tags. The tags can be used to run subsets of tests. Tests can have more than one tag, and the same tag can be used for multiple tests.</li>
  <li><code class="language-plaintext highlighter-rouge">REQUIRE</code> checks that the statement within the brackets is true.</li>
  <li><code class="language-plaintext highlighter-rouge">REQUIRE_THAT</code> takes a value first, and then a matcher expression. Matcher expressions do something more complex than just a simple equality test.
    <ul>
      <li><code class="language-plaintext highlighter-rouge">WithinRel</code> is a matcher expression which checks that takes two params: the expected value and the relative tolerance.</li>
      <li><code class="language-plaintext highlighter-rouge">AllTrue</code> is a matcher expression that takes no arguments, and is used to check that every element in an iterable container is true.</li>
    </ul>
  </li>
</ul>

<h3 id="require-and-check">REQUIRE and CHECK</h3>

<p>When using the <code class="language-plaintext highlighter-rouge">REQUIRE</code> macro, a <code class="language-plaintext highlighter-rouge">TEST_CASE</code> will terminate if it fails, and execution will move on to the next <code class="language-plaintext highlighter-rouge">TEST_CASE</code>. When using the <code class="language-plaintext highlighter-rouge">CHECK</code> macro, the <code class="language-plaintext highlighter-rouge">TEST_CASE</code> will continue on whether it passes or fails.</p>

<ul>
  <li>If your <code class="language-plaintext highlighter-rouge">TEST_CASE</code> does independent tests which don’t require the previous checks to have passed in order to continue, then use <code class="language-plaintext highlighter-rouge">CHECK</code>.</li>
  <li>If you need a particular condition to pass before continuing – a good example is checking an object being correctly set up – then use <code class="language-plaintext highlighter-rouge">REQUIRE</code>.</li>
  <li>Similarly we have both <code class="language-plaintext highlighter-rouge">REQUIRE_THAT</code> and <code class="language-plaintext highlighter-rouge">CHECK_THAT</code> for matchers.</li>
</ul>

<h3 id="testing-floating-point">Testing Floating Point</h3>

<p>You can use <code class="language-plaintext highlighter-rouge">WithinAbs(value, tolerance)</code> and <code class="language-plaintext highlighter-rouge">WithinRel(value, tolerance)</code> to check that floating point numbers are within some reasonable tolerance of what you expect. When considering what tolerance to use, you should think about:</p>
<ul>
  <li>What is the precision of your floating point numbers? (<code class="language-plaintext highlighter-rouge">float</code> or <code class="language-plaintext highlighter-rouge">double</code>?)</li>
  <li>How much error might accumulate in your calculation?</li>
  <li>How much error is acceptable to you? What precision is actually required?</li>
</ul>

<h3 id="testing-for-exceptions">Testing for Exceptions</h3>

<p>You should test that exceptions are thrown when they should be, and in some cases you explicitly check that exceptions are not thrown when they shouldn’t be.</p>
<ul>
  <li>Test any cases where exceptions should be thrown.
    <ul>
      <li>Use <code class="language-plaintext highlighter-rouge">REQUIRE_THROWS_AS(expression, exception_type)</code> or <code class="language-plaintext highlighter-rouge">CHECK_THROWS_AS(expression, exception_type)</code> to check that the correct exception is thrown. For example, if we have a factorial function which throws a <code class="language-plaintext highlighter-rouge">domain_error</code> if the factorial is undefined (e.g. negative numbers) then you could write <code class="language-plaintext highlighter-rouge">CHECK_THROWS_AS(factorial(-1), std::domain_error)</code>.</li>
    </ul>
  </li>
  <li>If a constructor can throw an exception, you should check that it does not throw an exception for a valid instantiation using <code class="language-plaintext highlighter-rouge">CHECK_NOTHROW</code> or <code class="language-plaintext highlighter-rouge">REQUIRE_NOTHROW</code>.</li>
</ul>

<p><strong>You can consult the Catch2 documentation for even more macros and ways of testing your code.</strong></p>



        </div>

      </div>
    </div>

  </div>
  <!-- end .site-content -->

  <footer class="footer wrapper">
  <div class="footer__inner clearfix">
             <article class="block block--col-1">
                <h2 class="as-h5">Information for</h2>
                <ul class="footer__list list-unstyled">
					<li class="footer__item"><a href="//www.ucl.ac.uk/students">Current students</a></li>
					<li class="footer__item"><a href="//www.ucl.ac.uk/staff">Staff</a></li>
					<li class="footer__item"><a href="//www.ucl.ac.uk/alumni">Alumni</a></li>
					<li class="footer__item"><a href="//www.ucl.ac.uk/enterprise/businesses">Business</a></li>
					<li class="footer__item"><a href="//www.ucl.ac.uk/giving">Donors</a></li>
				</ul>
            </article>
            <article class="block block--col-2">
		<h2 class="as-h5">Visit</h2>
                <ul class="footer__list list-unstyled">
					<li class="footer__item"><a href="//www.ucl.ac.uk/maps">Maps</a></li>
					<li class="footer__item"><a href="//www.ucl.ac.uk/lccos/library-culture-collections-and-open-science-lccos">Library, museums and collections</a></li>
					<li class="footer__item"><a href="//www.ucl.ac.uk/bloomsbury-theatre">Bloomsbury Theatre</a></li>
					<li class="footer__item"><a href="//www.ucl.ac.uk/ucl-east">UCL East</a></li>
					<li class="footer__item"><a href="//www.ucl.ac.uk/maps">Tours and visits</a></li>

				</ul>
            </article>
            <article class="block block--col-3">
		<h2 class="as-h5">Connect with UCL</h2>
                <ul class="footer__list list-unstyled">
					<li class="footer__item"><a href="//www.ucl.ac.uk/work-at-ucl/search-ucl-jobs">Jobs</a></li>
					<li class="footer__item"><a href="//www.ucl.ac.uk/news/services-media">Media Relations</a></li>
					<li class="footer__item"><a href="//www.ucl.ac.uk/events">Events</a></li>
					<li class="footer__item"><a href="//www.ucl.ac.uk/london">UCL and London</a></li>
					<li class="footer__item"><a href="//shop.ucl.ac.uk">UCL Shop</a></li>
				</ul>

      </article>
<div class="clear"></div>
<ul id="social" class="list-inline footer__list list-unstyled zero-bottom">
  <li><a href="//twitter.com/ucl"><img class="zero-bottom" alt="Twitter" src="//cdn.ucl.ac.uk/img/twitter-x.png" height="35" width="35"></a></li>
  <li><a href="//www.facebook.com/uclofficial"><img class="zero-bottom" alt="Facebook" src="//cdn.ucl.ac.uk/img/35x35xfacebook.png.pagespeed.ic.-VUStBF1gm.png" height="35" width="35"></a></li>
  <li><a href="//www.youtube.com/ucltv"><img class="zero-bottom" alt="YouTube" src="//cdn.ucl.ac.uk/img/35x35xyoutube-icon-square.png.pagespeed.ic.GcRcZjQawu.png" height="35" width="35"></a></li>
  <li><a href="//soundcloud.com/uclsound"><img class="zero-bottom" alt="SoundCloud" src="//cdn.ucl.ac.uk/img/35x35xsoundcloud.png.pagespeed.ic.BdtBaqtDmd.jpg" height="35" width="35"></a></li>
  <li><a href="//www.flickr.com/photos/uclnews"><img class="zero-bottom" alt="Flickr" src="//cdn.ucl.ac.uk/img/35x35xflickr.png.pagespeed.ic.KdAnMQjbrP.png" height="35" width="35"></a></li>
  <li><a href="//www.instagram.com/ucl/"><img class="zero-bottom" alt="Instagram" src="//cdn.ucl.ac.uk/img/35x35xinstagram-badge.png.pagespeed.ic.OPAzj9OMyV.png" height="35" width="35"></a></li>
  <li><a href="//www.tiktok.com/@uclofficial"><img class="zero-bottom" alt="TikTok" src="//cdn.ucl.ac.uk/img/tiktok.png" height="35" width="35"></a></li>
</ul>
    <hr class="clear">
    <ul class="footer__list list-unstyled zero-bottom">
      <li class="footer__item text-muted small">University College London,&nbsp;Gower Street,&nbsp;London,&nbsp;WC1E 6BT&nbsp;Tel:&nbsp;+44&nbsp;(0)&nbsp;20 7679 2000</li>
    </ul>
    <ul class="list-inline footer__list list-unstyled list-inline--divided">
      <li class="text-muted small">Copyright © 2025 UCL</li>
      </li>
      <li class="small"><a href="//www.ucl.ac.uk/legal-services/disclaimer">Disclaimer</a>
      </li>
      <li class="small"><a href="//www.ucl.ac.uk/foi">Freedom of Information</a>
      </li>
      <li class="small"><a href="//www.ucl.ac.uk/accessibility">Accessibility</a>
      </li>
      <li class="small"><a href="//www.ucl.ac.uk/legal-services/privacy">Privacy and Cookies</a>
      </li>
      <li class="small"><a href="//www.ucl.ac.uk/commercial-procurement/modern-day-slavery-statement">Slavery statement</a>
      </li>
      <li class="small"><a href="//www.ucl.ac.uk/about/contact-us">Contact Us</a>
      </li>
    </ul>
  </div>
</footer>


  <script src="/research-computing-with-cpp/assets/js/lib/require.min.js"></script>
  <script src="/research-computing-with-cpp/assets/js/main.js"></script>
    <script>
      require.config({
        baseUrl: '/research-computing-with-cpp/assets/js/lib'
      });
        require(["app/general", "app/searchWithAutoComplete", "app/tabs"]);//load the default stuff
    </script>

</body>

</html>

